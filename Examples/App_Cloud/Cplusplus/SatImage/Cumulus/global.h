//system
#pragma once
#include <stdio.h>
#include <math.h>
#include <time.h>
#include <stdlib.h>
#include <string>
#include <atlstr.h> 
#include <fstream>
#include <iostream>
#include <vector>
using namespace std;
//GL
//#include "gl/glut.h"

//opencv
#include <opencv/cxcore.h>
#include "opencv/cv.h"
#include "opencv/highgui.h"
#include <opencv2/highgui.hpp>

//cuda
//#include <cuda.h>
//#include <cuda_runtime.h>
//#include <cuda_gl_interop.h>

//const
#define MAXVAL 999999999
#define F_ZERO (1.0 / 999999999)
#define M_PI   3.14159265358979323846

//the radius of the earth (km)
#define  EARTH_RADIUS  6371
//the height of the satellite (km)
#define  SAT_ALTITUDE  705

//the spatial resolution (km)
#define  GEO_INTERVAL  0.03


//LANDSAT_SCENE_ID: LC81160482013179LGN01
//the selected region 
//#define   TOPLEFT_X  3561
//#define   TOPLEFT_Y  2063
//#define   REGION_WIDTH         650
//#define   REGION_HEIGHT        650
//#define   SCALE   (max(REGION_WIDTH-1,REGION_HEIGHT-1)*30.0)

#define   VIS_WAVELENGTH         6.55e-7
#define   NIR_WAVELENGTH         2.2e-6
#define   IR1_WAVELENGTH         1.09e-5

#define   Band4_WAVELENGTH  VIS_WAVELENGTH
#define   Band7_WAVELENGTH  NIR_WAVELENGTH

//#define   LANDSAT_SCENE_ID  "LC81160482013179LGN01"
//#define   FILE_DATE  20130628235849

//PRODUCT_METADATA
#define   DATA_TYPE  "L1T"
#define   ELEVATION_SOURCE  "GLS2000"
#define   OUTPUT_FORMAT  "GEOTIFF"
//#define   SPACECRAFT_ID  "LANDSAT_8"
//#define   SENSOR_ID  "OLI_TIRS"
//#define   WRS_PATH 116
//#define   WRS_ROW  48
#define   NADIR_OFFNADIR    "NADIR"
#define   TARGET_WRS_PATH 116
#define   TARGET_WRS_ROW  48
#define   DATE_ACQUIRED  2013-06-28
#define   SCENE_CENTER_TIME  02:18:35.0771487Z
#define   CORNER_UL_LAT_PRODUCT  18.38931
#define   CORNER_UL_LON_PRODUCT  120.41711
#define   CORNER_UR_LAT_PRODUCT 18.40641
#define   CORNER_UR_LON_PRODUCT 122.58625
#define   CORNER_LL_LAT_PRODUCT 16.27085
#define   CORNER_LL_LON_PRODUCT 120.44658
#define   CORNER_LR_LAT_PRODUCT 16.28586
#define   CORNER_LR_LON_PRODUCT 122.59097
#define   CORNER_UL_PROJECTION_X_PRODUCT 227100.000
#define   CORNER_UL_PROJECTION_Y_PRODUCT 2035200.000
#define   CORNER_UR_PROJECTION_X_PRODUCT 456300.000
#define   CORNER_UR_PROJECTION_Y_PRODUCT 2035200.000
#define   CORNER_LL_PROJECTION_X_PRODUCT 227100.000
#define   CORNER_LL_PROJECTION_Y_PRODUCT 1800600.000
#define   CORNER_LR_PROJECTION_X_PRODUCT 456300.000
#define   CORNER_LR_PROJECTION_Y_PRODUCT 1800600.000
#define   PANCHROMATIC_LINES   15641
#define   PANCHROMATIC_SAMPLES 15281
#define   REFLECTIVE_LINES     7821
#define   REFLECTIVE_SAMPLES   7641
#define   THERMAL_LINES        7821
#define   THERMAL_SAMPLES      7641
//#define   FILE_NAME_BAND_1     "LC81160482013179LGN01_B1.TIF"
//#define   FILE_NAME_BAND_2     "LC81160482013179LGN01_B2.TIF"
//#define   FILE_NAME_BAND_3     "LC81160482013179LGN01_B3.TIF"
//#define   FILE_NAME_BAND_4     "LC81160482013179LGN01_B4.TIF"
//#define   FILE_NAME_BAND_5     "LC81160482013179LGN01_B5.TIF"
//#define   FILE_NAME_BAND_6     "LC81160482013179LGN01_B6.TIF"
//#define   FILE_NAME_BAND_7     "LC81160482013179LGN01_B7.TIF"
//#define   FILE_NAME_BAND_8     "LC81160482013179LGN01_B8.TIF"
//#define   FILE_NAME_BAND_9     "LC81160482013179LGN01_B9.TIF"
//#define   FILE_NAME_BAND_10    "LC81160482013179LGN01_B10.TIF"
//#define   FILE_NAME_BAND_11    "LC81160482013179LGN01_B11.TIF"
//#define   FILE_NAME_BAND_QUALITY     "LC81160482013179LGN01_BQA.TIF"
//#define   METADATA_FILE_NAME     "LC81160482013179LGN01_MTL.txt"

//IMAGE_ATTRIBUTES
#define   CLOUD_COVER     17.48
#define   IMAGE_QUALITY_OLI     9
#define   IMAGE_QUALITY_TIRS     9
#define   ROLL_ANGLE     -0.001
#define   SUN_AZIMUTH     71.25818937
#define   SUN_ELEVATION     66.13795965
#define   EARTH_SUN_DISTANCE     1.0165550
#define   GROUND_CONTROL_POINTS_MODEL     242
#define   GEOMETRIC_RMSE_MODEL     7.843
#define   GEOMETRIC_RMSE_MODEL_Y     5.450
#define   GEOMETRIC_RMSE_MODEL_X     5.640
#define   GROUND_CONTROL_POINTS_VERIFY     68
#define   GEOMETRIC_RMSE_VERIFY     6.723

//GROUP     */MIN_MAX_RADIANCE
#define   RADIANCE_MAXIMUM_BAND_1     755.86292
#define   RADIANCE_MINIMUM_BAND_1     -62.41941
#define   RADIANCE_MAXIMUM_BAND_2     770.78125
#define   RADIANCE_MINIMUM_BAND_2     -63.65137
#define   RADIANCE_MAXIMUM_BAND_3     705.77563
#define   RADIANCE_MINIMUM_BAND_3     -58.28318
#define   RADIANCE_MAXIMUM_BAND_4     597.74872
#define   RADIANCE_MINIMUM_BAND_4     -49.36229
#define   RADIANCE_MAXIMUM_BAND_5     362.72061
#define   RADIANCE_MINIMUM_BAND_5     -29.95358
#define   RADIANCE_MAXIMUM_BAND_6     91.38748
#define   RADIANCE_MINIMUM_BAND_6     -7.54681
#define   RADIANCE_MAXIMUM_BAND_7     29.72818
#define   RADIANCE_MINIMUM_BAND_7     -2.45496
#define   RADIANCE_MAXIMUM_BAND_8     673.32617
#define   RADIANCE_MINIMUM_BAND_8     -55.60349
#define   RADIANCE_MAXIMUM_BAND_9     149.05695
#define   RADIANCE_MINIMUM_BAND_9     -12.30917
#define   RADIANCE_MAXIMUM_BAND_10     22.00180
#define   RADIANCE_MINIMUM_BAND_10     0.10033
#define   RADIANCE_MAXIMUM_BAND_11     22.00180
#define   RADIANCE_MINIMUM_BAND_11     0.10033

//GROUP     */MIN_MAX_REFLECTANCE
#define   REFLECTANCE_MAXIMUM_BAND_1     1.210700
#define   REFLECTANCE_MINIMUM_BAND_1     -0.099980
#define   REFLECTANCE_MAXIMUM_BAND_2     1.210700
#define   REFLECTANCE_MINIMUM_BAND_2     -0.099980
#define   REFLECTANCE_MAXIMUM_BAND_3     1.210700
#define   REFLECTANCE_MINIMUM_BAND_3     -0.099980
#define   REFLECTANCE_MAXIMUM_BAND_4     1.210700
#define   REFLECTANCE_MINIMUM_BAND_4     -0.099980
#define   REFLECTANCE_MAXIMUM_BAND_5     1.210700
#define   REFLECTANCE_MINIMUM_BAND_5     -0.099980
#define   REFLECTANCE_MAXIMUM_BAND_6     1.210700
#define   REFLECTANCE_MINIMUM_BAND_6     -0.099980
#define   REFLECTANCE_MAXIMUM_BAND_7     1.210700
#define   REFLECTANCE_MINIMUM_BAND_7     -0.099980
#define   REFLECTANCE_MAXIMUM_BAND_8     1.210700
#define   REFLECTANCE_MINIMUM_BAND_8     -0.099980
#define   REFLECTANCE_MAXIMUM_BAND_9     1.210700
#define   REFLECTANCE_MINIMUM_BAND_9     -0.099980

//MIN_MAX_PIXEL_VALUE
#define   QUANTIZE_CAL_MAX_BAND_1     65535
#define   QUANTIZE_CAL_MIN_BAND_1     1
#define   QUANTIZE_CAL_MAX_BAND_2     65535
#define   QUANTIZE_CAL_MIN_BAND_2     1
#define   QUANTIZE_CAL_MAX_BAND_3     65535
#define   QUANTIZE_CAL_MIN_BAND_3     1
#define   QUANTIZE_CAL_MAX_BAND_4     65535
#define   QUANTIZE_CAL_MIN_BAND_4     1
#define   QUANTIZE_CAL_MAX_BAND_5     65535
#define   QUANTIZE_CAL_MIN_BAND_5     1
#define   QUANTIZE_CAL_MAX_BAND_6     65535
#define   QUANTIZE_CAL_MIN_BAND_6     1
#define   QUANTIZE_CAL_MAX_BAND_7     65535
#define   QUANTIZE_CAL_MIN_BAND_7     1
#define   QUANTIZE_CAL_MAX_BAND_8     65535
#define   QUANTIZE_CAL_MIN_BAND_8     1
#define   QUANTIZE_CAL_MAX_BAND_9     65535
#define   QUANTIZE_CAL_MIN_BAND_9     1
#define   QUANTIZE_CAL_MAX_BAND_10     65535
#define   QUANTIZE_CAL_MIN_BAND_10     1
#define   QUANTIZE_CAL_MAX_BAND_11     65535
#define   QUANTIZE_CAL_MIN_BAND_11     1

//RADIOMETRIC_RESCALING
#define   RADIANCE_MULT_BAND_1     1.2486e-2
#define   RADIANCE_MULT_BAND_2     1.2733e-2
#define   RADIANCE_MULT_BAND_3     1.1659e-2
#define   RADIANCE_MULT_BAND_4     9.8744e-3
#define   RADIANCE_MULT_BAND_5     5.9919e-3
#define   RADIANCE_MULT_BAND_6     1.5097e-3
#define   RADIANCE_MULT_BAND_7     4.9109e-4
#define   RADIANCE_MULT_BAND_8     1.1123e-2
#define   RADIANCE_MULT_BAND_9     2.4623e-3
#define   RADIANCE_MULT_BAND_10     3.3420e-4
#define   RADIANCE_MULT_BAND_11     3.3420e-4
#define   RADIANCE_ADD_BAND_1     -62.43189
#define   RADIANCE_ADD_BAND_2     -63.66410
#define   RADIANCE_ADD_BAND_3     -58.29484
#define   RADIANCE_ADD_BAND_4     -49.37216
#define   RADIANCE_ADD_BAND_5     -29.95958
#define   RADIANCE_ADD_BAND_6     -7.54832
#define   RADIANCE_ADD_BAND_7     -2.45545
#define   RADIANCE_ADD_BAND_8     -55.61462
#define   RADIANCE_ADD_BAND_9     -12.31163
#define   RADIANCE_ADD_BAND_10     0.10000
#define   RADIANCE_ADD_BAND_11     0.10000
#define   REFLECTANCE_MULT_BAND_1     2.0000e-5
#define   REFLECTANCE_MULT_BAND_2     2.0000e-5
#define   REFLECTANCE_MULT_BAND_3     2.0000e-5
#define   REFLECTANCE_MULT_BAND_4     2.0000e-5
#define   REFLECTANCE_MULT_BAND_5     2.0000e-5
#define   REFLECTANCE_MULT_BAND_6     2.0000e-5
#define   REFLECTANCE_MULT_BAND_7     2.0000e-5
#define   REFLECTANCE_MULT_BAND_8     2.0000e-5
#define   REFLECTANCE_MULT_BAND_9     2.0000e-5
#define   REFLECTANCE_ADD_BAND_1     -0.100000
#define   REFLECTANCE_ADD_BAND_2     -0.100000
#define   REFLECTANCE_ADD_BAND_3     -0.100000
#define   REFLECTANCE_ADD_BAND_4     -0.100000
#define   REFLECTANCE_ADD_BAND_5     -0.100000
#define   REFLECTANCE_ADD_BAND_6     -0.100000
#define   REFLECTANCE_ADD_BAND_7     -0.100000
#define   REFLECTANCE_ADD_BAND_8     -0.100000
#define   REFLECTANCE_ADD_BAND_9     -0.100000

//TIRS_THERMAL_CONSTANTS
#define   K1_CONSTANT_BAND_10     774.89
#define   K1_CONSTANT_BAND_11     480.89
#define   K2_CONSTANT_BAND_10     1321.08
#define   K2_CONSTANT_BAND_11     1201.14

#define   UTM_ZONE                        51
#define   GRID_CELL_SIZE_PANCHROMATIC     15.00        //meter
#define   GRID_CELL_SIZE_REFLECTIVE       30.00        //meter
#define   GRID_CELL_SIZE_THERMAL          30.00        //meter

//YCQ
#define  SAT_ORBIT_DIRECTION_ANGLE          (12.6 + 180)

//#define  YEAR                               2013
//#define  MONTH                              6
//#define  DAY                                28
//#define  HOUR                               2
//#define  MINUTE                             18
//#define  SECONDS                            35
//#define  LAND_AVG_TEMPERATURE               283
